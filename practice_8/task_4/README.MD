# Сравнение CPU, GPU и гибридного подхода  
## Анализ производительности (Задание 8)

В данном разделе проводится сравнение времени выполнения обработки массива
для трёх подходов:
- обработка на **CPU с использованием OpenMP** (8.1);
- обработка на **GPU с использованием CUDA** (8.2);
- **гибридная обработка CPU + GPU** (8.3).

Операция обработки одинакова для всех вариантов: **умножение каждого элемента массива на 2**.

---

## Исходные данные для сравнения

### N = 1 000 000
- CPU OpenMP: **0.485274 ms**
- GPU total (H2D + kernel + D2H): **2.221280 ms**
- Hybrid total: **8.864407 ms**

### N = 10 000 000
- CPU OpenMP: **6.027850 ms**
- GPU total (H2D + kernel + D2H): **18.947264 ms**
- Hybrid total: **18.764362 ms**

---

## 1. Сравнение времени выполнения

### Малый и средний размер массива (N = 1 000 000)
- Самым быстрым вариантом является **CPU с OpenMP**.
- GPU проигрывает CPU из-за значительных накладных расходов на копирование данных между CPU и GPU.
- Гибридный вариант оказывается самым медленным, так как совмещает накладные расходы CPU и GPU, не получая выигрыша от параллелизма.

### Большой размер массива (N = 10 000 000)
- CPU OpenMP всё ещё показывает лучшее время для простой операции умножения.
- GPU демонстрирует стабильное, но более медленное выполнение из-за стоимости передачи данных.
- Гибридный подход по времени близок к чистому GPU-варианту, так как основное время определяется GPU-частью и передачей данных.

---

## 2. Анализ производительности и эффективность гибридного подхода

- Для **простых операций с малой вычислительной нагрузкой** (например, умножение на константу) гибридный подход **не даёт выигрыша**.
- Основное узкое место гибридного и GPU-вариантов — **передача данных между CPU и GPU**.
- Гибридный подход становится наиболее эффективным в случаях, когда:
  - вычисления на GPU достаточно тяжёлые и значительно превосходят по времени передачу данных;
  - есть возможность эффективно перекрывать вычисления CPU и GPU;
  - нагрузка между CPU и GPU сбалансирована (не обязательно 50/50);
  - используется оптимизированная передача данных (pinned memory, асинхронные копирования).

В текущем эксперименте операция слишком простая, поэтому накладные расходы доминируют над вычислениями.

---

## Вывод
Сравнение показало, что:
- **CPU OpenMP** наиболее эффективен для простых операций над массивами.
- **GPU** выигрывает при увеличении вычислительной сложности задачи, а не только объёма данных.
- **Гибридный подход** оправдан для вычислительно сложных задач и при грамотной балансировке нагрузки, но для простых операций может быть неэффективен.

Данный эксперимент наглядно демонстрирует, что выбор архитектуры вычислений должен зависеть не только от размера данных, но и от характера выполняемых операций.
